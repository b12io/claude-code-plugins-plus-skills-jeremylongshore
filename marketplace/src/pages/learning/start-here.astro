---
import BaseLayout from '../../layouts/BaseLayout.astro';

const title = 'Start Here | Learning Lab';
const description = 'Introduction to the test harness pattern - understand the mental model before diving into code.';
---

<BaseLayout title={title} description={description}>
  <div class="guide-page">
    <div class="guide-container">
      <div class="progress-bar">
        <div class="progress-fill" style="width: 12.5%"></div>
      </div>

      <div class="guide-header">
        <a href="/learning" class="back-link">&larr; Back to Learning Hub</a>
        <div class="guide-meta">
          <span>Guide 1 of 8</span>
          <span>5 min read</span>
        </div>
      </div>

      <article class="guide-content">
        <h1>Start Here &mdash; The Test Harness Pattern</h1>

        <div class="goal-box">
          <strong>Goal:</strong> Understand the mental model before diving into code
        </div>

        <section>
          <h2>The Problem We're Solving</h2>
          <p>You ask an LLM to do multi-step work: analyze a codebase, find bottlenecks, suggest optimizations, verify the suggestions, and write a report.</p>
          <p><strong>What usually happens:</strong></p>
          <ul>
            <li>Agent writes a wall of text</li>
            <li>You can't verify if it actually did the work</li>
            <li>No structured output (just narrative)</li>
            <li>If something's wrong, you can't tell where it failed</li>
            <li>Hard to reuse or automate</li>
          </ul>
          <p><strong>What you wish happened:</strong></p>
          <ul>
            <li>Agent produces evidence of each step</li>
            <li>You can verify work was done</li>
            <li>Outputs are machine-readable</li>
            <li>Failures are clear and debuggable</li>
            <li>System is repeatable and composable</li>
          </ul>

          <h2>The Solution: Test Harness Pattern</h2>
          <p>Think of this like a CI/CD pipeline for LLM work. An <strong>orchestrator</strong> creates an isolated session directory, spawns phases in order, validates outputs before continuing, and aggregates final results.</p>

          <h2>Key Concepts</h2>

          <h3>1. Session Directory</h3>
          <p>Every workflow run gets its own isolated folder with timestamped reports. This is your evidence trail &mdash; you can inspect what was actually done.</p>

          <h3>2. Strict JSON Contracts</h3>
          <p>Every phase MUST return a structured format: <code>status</code>, <code>report_path</code>, and <code>phase_summary</code>. This makes outputs machine-readable so the orchestrator can validate programmatically.</p>

          <h3>3. Validation Gates</h3>
          <p>After each phase, the orchestrator checks: Is the JSON valid? Is the status "complete"? Does the report file exist on disk? Are required summary keys present? If anything fails, it stops immediately.</p>

          <h3>4. The Verification Phase</h3>
          <p>This is what makes the pattern powerful: one phase runs an <em>actual script</em> (not LLM analysis), compares script output against earlier conclusions, and reports what was confirmed, revised, or unexpected. Empirical validation &mdash; the script doesn't lie.</p>

          <h3>5. Reference Instruction Docs</h3>
          <p>Each phase has a corresponding instruction file that tells the agent exactly what to do. Same instructions produce the same outputs &mdash; deterministic behavior.</p>

          <h2>The Mental Model</h2>
          <p>Think of it as a <strong>scientific experiment protocol</strong>:</p>
          <ol>
            <li><strong>Hypothesis Phase (1-3):</strong> Analyze, form conclusions</li>
            <li><strong>Verification Phase (4):</strong> Run experiment to test hypothesis</li>
            <li><strong>Conclusion Phase (5):</strong> Synthesize validated findings</li>
          </ol>
          <p>The key insight: this pattern turns "LLM wrote some text" into "LLM executed a validated procedure with evidence and structured outputs." That's the difference between a chatbot and a production system.</p>

          <h2>What You'll Learn</h2>
          <p>By the end of this lab, you'll be able to:</p>
          <ol>
            <li><strong>Understand</strong> the test harness pattern and why it's powerful</li>
            <li><strong>Navigate</strong> the reference implementation</li>
            <li><strong>Modify</strong> phases and reference docs for your needs</li>
            <li><strong>Build</strong> your own multi-phase workflow from scratch</li>
            <li><strong>Debug</strong> when phases fail or return invalid outputs</li>
            <li><strong>Deploy</strong> production-ready workflows using this pattern</li>
          </ol>

          <h2>Full Guide on GitHub</h2>
          <p>The complete guide includes detailed diagrams, terminology tables, and extended examples:</p>
          <div class="source-link-box">
            <a href="https://github.com/jeremylongshore/claude-code-plugins/blob/main/workspace/lab/GUIDE-00-START-HERE.md" class="github-link" target="_blank" rel="noopener noreferrer">
              View Full Guide on GitHub &rarr;
            </a>
          </div>
        </section>
      </article>

      <nav class="guide-nav">
        <a href="/learning">Back to Hub</a>
        <a href="/learning/pattern-explained">Pattern Explained &rarr;</a>
      </nav>
    </div>
  </div>
</BaseLayout>

<style>
.guide-page{min-height:100vh;background:var(--brand-light)}.guide-container{max-width:900px;margin:0 auto;padding:2rem 1rem}.progress-bar{width:100%;height:4px;background:var(--brand-light-gray);border-radius:2px;margin-bottom:2rem}.progress-fill{height:100%;background:linear-gradient(90deg,var(--brand-orange),var(--brand-orange))}.guide-header{margin-bottom:2rem}.back-link{color:var(--brand-mid-gray);text-decoration:none;font-size:.875rem}.guide-meta{display:flex;gap:1rem;font-size:.875rem;color:var(--brand-mid-gray);margin-top:.5rem}.guide-content{background:var(--brand-light-gray);border:1px solid var(--brand-light-gray);border-radius:.5rem;padding:3rem;margin-bottom:2rem}.guide-content h1{font-size:2.5rem;color:var(--brand-dark);margin:0 0 2rem}.guide-content h2{font-size:1.75rem;color:var(--brand-dark);margin:2.5rem 0 1rem;border-bottom:2px solid var(--brand-light-gray);padding-bottom:.5rem}.guide-content h3{font-size:1.25rem;color:var(--brand-dark);margin:1.5rem 0 .75rem}.guide-content p{color:var(--brand-mid-gray);line-height:1.7;margin:1rem 0}.guide-content ul,.guide-content ol{color:var(--brand-mid-gray);padding-left:2rem}.guide-content li{margin:.5rem 0}.guide-content code{background:rgba(217,119,87,.1);padding:.15rem .4rem;border-radius:4px;font-size:.9em;color:var(--brand-orange-dark)}.goal-box{background:linear-gradient(135deg,rgba(217,119,87,.2),rgba(217,119,87,.2));border-left:4px solid var(--brand-orange);padding:1rem 1.5rem;margin:2rem 0;border-radius:.375rem;color:var(--brand-dark)}.source-link-box{text-align:center;margin:2rem 0}.github-link{display:inline-block;padding:1rem 2rem;background:var(--brand-orange);color:white;text-decoration:none;border-radius:.375rem;font-weight:600}.github-link:hover{background:var(--brand-orange-dark)}.guide-nav{display:flex;justify-content:space-between;margin-top:2rem}.guide-nav a{padding:1rem 1.5rem;background:var(--brand-light-gray);border:1px solid var(--brand-light-gray);border-radius:.5rem;color:var(--brand-dark);text-decoration:none}.guide-nav a:hover{border-color:var(--brand-orange)}
</style>
